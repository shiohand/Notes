# ルーティング

## ルーティングとは
アクセスを設定している情報(ルート)を管理する機能

- 通常のアクセス
\- ファイル名を入力して直接アクセス
\- 例) /first.php にアクセス -> first.phpが実行される
- Laravelのアクセス
\- 特定のアドレスにプログラムを割り付けて実行し、処理や画面表示を行う
\- 例) /one にアクセス -> first が実行される

## routesフォルダの内容
デフォルトで四つのファイルが用意されている

| ファイル       | 内容 |
|-             |- |
| api.php      | APIのルーティング<br>ユーザー認証などのようなプログラム内から利用するAPIの機能を、特定のアドレスに割り当てる
| channels.php | ブロードキャストチャンネルのためのルーティング
| console.php  | コンソールプログラムのためのルーティング
| web.php      | ★ 一般的なWebページとしてアクセスするためのルーティング

## routes/web.php
ルーティングを記述する

### ルーティング情報の記述

#### Routeクラスの静的メソッド get()
```php
Route::get(アドレス, 関数やコントローラ)
```

- 関数を実行するルーティング
```php
Route::get('/', function() { // '/'にアクセスすると
  return view('welcome'); // welcomeというviewを表示する
});
```

- コントローラに繋ぐルーティング
```php
Route::get('/hello', 'HelloController@index'); // HelloControllerのindexアクション
Route::get('/hello/other', 'HelloController@other');
Route::get('/hello/other', 'HelloController'); // シングルアクションコントローラの場合はアクションを記述しない
```
- 特に理由が無ければ`/コントローラ/アクション`とするのが分かりやすい
- 規則を作って割り当てを考えたり、長いアクション名を省略したりする場合はアリ

(
Laravel 8 以降は
app/Providers/RouteServiceProvider.php の
`// protected $namespace = 'App\\Http\\Controllers';`
のコメントアウトを外す
(https://qiita.com/tamakiiii/items/e71040173fa0a1fcad83)
)

- コントローラにつなぐルーティング

### returnでビューを返す

- return view(文字列)
テンプレートファイルをレンダリングして表示する。
ファイルは resource/views/[文字列].brade.php

- return HTML文字列
```php
Route::get('hello', function() {
  return '<html><body><h1>Hello</h1><p>This is sample page.</p></body></html>';
});
```

### ルートパラメータの利用

要求されたアドレスのパラメータ部分を引数で受け取って利用できる

```php
Route::get('/hello/{param}', function($arg) {});
Route::get('/hello/{param}', 'HelloController@index');
```

- `{プレースホルダ}`とした部分を文字列で受け取る
- プレースホルダの名前はなんでもよく、引数の名前と異なっていてもよい
- 必須パラメータであり、省略した場合は該当したとみなされない

```php
Route::get('/hello/{param1}/{param2}', function($param1, $param2) {});
```

- スラッシュで区切れば複数のパラメータを利用可能

```php
Route::get('/hello/{param?}', function($param = 'default') {});
```

- `{プレースホルダ?}`とした場合、任意のパラメータとなる
- 初期値の設定忘れないように
- `?` ってのが正規表現(0回か1回)ぽくて乙ですね