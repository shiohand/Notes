# コマンドまとめ

$ git コマンド

| init            | -                                                |
| --------------- | ------------------------------------------------ |
| `init`          | リポジトリ作成                                   |
| `init --bare`   | ベアリポジトリ                                   |
| `init --shared` | グループによるパーミッション(複数ユーザからプル) |

| clone          | -                |
| -------------- | ---------------- |
| `clone [PATH]` | リポジトリを複製 |

## 参照

| show             | -                        |
| ---------------- | ------------------------ |
| `show`           | 最新のコミット内容を表示 |
| `show [id]`      | 指定のコミット内容を表示 |
| `show [tagname]` | タグを指定               |

| status   | -                                                                            |
| -------- | ---------------------------------------------------------------------------- |
| `status` | 前回のコミットから変更されているファイルと、ステージに登録されているかを表示 |

| diff                 | -                                          |
| -------------------- | ------------------------------------------ |
| `diff`               | インデックスとワーキングツリーの差異を表示 |
| `diff [id 1] [id 2]` | 指定したコミット間の差異を表示             |
| `diff --word-diff`   | 文字単位での差分                           |
| `diff --cached`      | HEADとのインデックスの差分を表示           |

| log                   | -                                    |
| --------------------- | ------------------------------------ |
| `log`                 | コミットログを参照                   |
| `log -p`              | 変更内容も参照                       |
| `log -n`              | 過去n件を表示 数値を入れる           |
| `log --oneline `      | 先頭7桁のコミットIDを表示            |
| `log --decorate`      | HEADの位置を明示 タグ情報なども      |
| `log --graph`         | 縦グラフで表示                       |
| `log --grep [filter]` | 指定した文字の含まれるコミットを表示 |

| reflog            | -                                                  |
| ----------------- | -------------------------------------------------- |
| `reflog`          | 参照ログ(HEAD等の移動履歴)を表示(HEAD@{0}とか確認) |
| `reflog [branch]` | 指定のブランチのみで表示                           |

| config                                       | -                                |
| -------------------------------------------- | -------------------------------- |
| `config -l`                                  | 使用されるリポジトリの設定を表示 |
| `config --global user.name [username]`       | ユーザ名                         |
| `config --global user.email [email address]` | メールアドレス                   |
| `config --global color.ui auto`              | 出力結果を色付け                 |


## ステージ

| add              | -                                          |
| ---------------- | ------------------------------------------ |
| `add [filename]` | インデックスに登録                         |
| `add -A`         | 変更のあるワークツリーの内容を追加         |
| `add -u`         | 以前コミットしたことがあるファイルのみ追加 |

| mv                             | -                                                                      |
| ------------------------------ | ---------------------------------------------------------------------- |
| `mv [filename 1] [filename 2]` | インデックスとワークツリーに同ファイルが存在する場合、ファイル名を変更 |

| rm                      | -                                            |
| ----------------------- | -------------------------------------------- |
| `rm [filename]`         | ワークツリーとインデックスからファイルを削除 |
| `rm --cache [filename]` | インデックスのファイルを削除                 |


## コミット

| commit                  | -                                  |
| ----------------------- | ---------------------------------- |
| `commit`                | インデックスの内容でコミット       |
| `commit -m "[comment]"` | コミットメッセージ付き             |
| `commit -a`             | 変更されたファイルを追加、コミット |
| `commit --amend`        | 直前のコミットを修正               |

| tag                               | -                                                 |
| --------------------------------- | ------------------------------------------------- |
| `tag`                             | タグ一覧表示                                      |
| `tag 0n[number]@`                 | タグと[number]行のメッセージの一覧表示(初期値1行) |
| `tag -l [filter]`                 | フィルターをかけて表示                            |
| `tag [tagname]`                   | 現在のコミットIDにタグを関連付け                  |
| `tag [tagname] [id]`              | 指定のコミットIDにタグを関連付け                  |
| `tag -a [tagname] -m "[message]"` | 現在のコミットIDにメッセージ付きのタグを関連付け  |
| `tag -d [tagname]`                | 指定したタグの削除                                |

| reset                          | -                                                  |
| ------------------------------ | -------------------------------------------------- |
| `reset --soft [id]`            | コミットをidまで戻す                               |
| `reset --mixed [id]`           | インデックスをidの状態にする(デフォルト)           |
| `reset --hard [id]`            | ワークツリーを含めた全てを指定したコミットの状態に |
| `reset HEAD [filename]`        | インデックスからファイルをアンステージ             |
| `reset --hard HEAD@{[number]}` | 指定した状態(reflogで取得)に戻す                   |
| `reset --hard ORIG_HEAD`       | 直前の状態に戻す                                   |
hardは、stashのときとか、コミットしてなくてもワークツリーを戻すためだけに使うことも

| revert                              | -                                                      |
| ----------------------------------- | ------------------------------------------------------ |
| `revert [id]`                       | 指定したコミットを取り消し                             |
| `revert -m [num] [merge commit id]` | マージコミットの打ち消しの場合、結合前のどちらに戻るか |
(showで違いを見られる)

## リモート

| remote                                | -                                                    |
| ------------------------------------- | ---------------------------------------------------- |
| `remote`                              | 一覧表示                                             |
| `remote -v`                           | URL込で表示                                          |
| `remote add [username] [remote PATH]` | 名前とリポジトリを関連付け(リモートリポジトリの追加) |
| `remote rename [remote] [new name]`   | 名前を変更                                           |
| `remote show [remote]`                | 情報を見る                                           |
| `remote prune [remote]`               | 排除されたブランチをローカルからも削除               |

| push                                 | -                             |
| ------------------------------------ | ----------------------------- |
| `push [remote PATH] [branch]`        | 変更を書き込む                |
| `push -u [remote PATH] [branch]`     | プッシュ+branchを基準(上流)に |
| `push --set-upstream ...`            | (同じ)                        |
| `push [remote] --tags`               | すべてのタグをアップロード    |
| `push [remote] [tagname]`            | 指定したタグをアップロード    |
| `push [remote] :[branch or tagname]` | 指定したブランチかタグを削除  |

| fetch            | -                                  |
| ---------------- | ---------------------------------- |
| `fetch [remote]` | リモートの最新情報を追加           |
| `fetch --prune`  | リモートの削除情報をローカルに更新 |

| pull                          | -              |
| ----------------------------- | -------------- |
| `pull [remote PATH] [branch]` | 変更を取り込む |


## ブランチ

### branch

| branch                                              | -                                                  |
| --------------------------------------------------- | -------------------------------------------------- |
| `branch`                                            | ブランチ一覧表示(現在位置も分かる)                 |
| `branch [branch]`                                   | ブランチ作成                                       |
| `branch $[new branch]`                              | ブランチを作成                                     |
| `branch -a`                                         | リモートブランチを含めたすべてのブランチを確認する |
| `branch -r`                                         | リモートブランチを確認する                         |
| `branch -vv`                                        | 追跡ブランチを確認                                 |
| `branch -d [branch]`                                | ブランチを削除                                     |
| `branch -m [branch] [new branchname]`               | ブランチの名前を変更する                           |
| `branch --set -upstream [my branch] [other branch]` | ブランチを関連付ける                               |

### checkout

| checkout                     | -                                                              |
| ---------------------------- | -------------------------------------------------------------- |
| checkout [id] [filename]     | コミットされた過去のファイルを復元                             |
| checkout [branch]            | ブランチを変更する                                             |
| checkout -b [branch]         | ブランチを作成して変更                                         |
| checkout --ours [filename]   | マージでコンフリクトしたときに情報を指定し、ファイル内容を採用 |
| checkout --theirs [filename] | マージでコンフリクトしたときに下方を指定してファイル内容を採用 |

### cherry

| cherry-pick        | -                                              |
| ------------------ | ---------------------------------------------- |
| `cherry-pick [id]` | 別のブランチのコミットを現在のブランチにコピー |

### merge

| merge            | -                                        |
| ---------------- | ---------------------------------------- |
| `merge [branch]` | 現在のブランチと他のブランチとマージする |

### rebase

| rebase           |
| ---------------- |
| `rebase -i [id]` |

  コミットIDから古い順にコミットが表示される
  コミットの行を消すとコミットの取り消し
  先頭のpickをほかのものに置き換えるとコミットメッセージなどの編集

| rebase              | -                        |
| ------------------- | ------------------------ |
| `rebase --abort`    | 直前のrebaseの編集を中止 |
| `rebase --continue` | rebaseの変更を適用       |

### stash

| stash                          | -                                                |
| ------------------------------ | ------------------------------------------------ |
| `stash`                        | 保存                                             |
| `stash save "[message]"`       | 普通こっち メッセージ付きで保存                  |
| `stash list`                   | 保存した状態の一覧を表示                         |
| `stash pop`                    | 最新の保存状態を復元 スタッシュからは削除        |
| `stash pop stash@{[number]}`   | 指定してpop                                      |
| `stash apply`                  | 保存状態をリストに残したまま最新の保存状態を復元 |
| `stash apply stash@{[number]}` | 保存状態をリストに残したまま指定の保存状態を復元 |
| `stash drop stash@{[number]}`  | 指定した保存状態の削除 しなくてもいい            |
| `stash clear`                  | 全て削除                                         |